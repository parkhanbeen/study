# 도커 정리

* 도커에는 두 가지 외부 데이터 저장 메커니즘이 있음
    1. Volumes(볼륨)
    2. Bind Mounts(바인드 마운트)

## Volumes

* 볼륨은 호스트 머신의 폴더
* 컨테이너나 이미지에 있는 게 아님 즉, 호스트 컴퓨터에 장착된 하드 드라이브에 존재하여 사용가능하거나, 컨테이너로 매핑되는 것을 의미
* 볼륨은 도커가 인식하는 호스트 머신인 컴퓨터에 있는 폴더로서 도커 컨테이너 내부의 폴더에 매핑된다.
* 그리고 두 폴더의 변경 사항은 다른 폴더에 반영된다.
* 따라서 호스트 머신에 파일을 추가하면 컨테이너 내부에서 액세스할 수 있고 컨테이너가 매핑된 경로에 파일을 추가하면 컨테이너 외부, 즉 호스트 머신에서도 사용할 수 있다.

* 이러한 메커니즘은 볼륨을 통해 데이터를 유지할 수 있음

* VOLUME [ "/app/feedback" ] : 앞 경로는 컨테이너 내부 위치
* /app/feedback 경로는 호스트 머신의 어떤 폴더(도커에서 관리하는 폴더 우리는 모름...)에 매핑됨

### 두 가지 타입의 볼륨

1. 익명(Anonymous)의 볼륨
    * 컨테이너가 존재하는 동안에만 실제로 존재함
    * 즉, 컨테이너를 종료하면 데이터가 사라짐
    * --rm 옵션으로 컨테이너 실행시 컨테이너가 제거되면 자동 종료
    * 만약 --rm 옵션 없이 컨테이너 실행시 컨테이너가 제거되더라도 볼륨은 계속 쌓임
        * 볼륨 제거 명령으로 정리해야됨


2. 명명된(named) 볼륨
    * 컨테이너가 종료된 후에도 볼륨이 유지됨
    * 즉, 하드 드라이브의 폴더가 그대로 유지됨
    * 새 컨테이너가 시작되면 볼륨이 복구되고 폴더가 복구되어 해당 폴더에 저장된 모든 데이터를 계속 사용할 수 있음
    * 따라서 명명된 볼륨은 영구적이어야 하는 데이터나, 편집하거나 직접 볼 필요가 없는 중요한 데이터에 적합하다.
    * ex) -v {볼륨명}:{경로} : 호스팅 머신에 폴더를 만들어 컨텡이너 내부의 이 폴더에 연결하지만 이 볼륨은 우리가 선택한 이름으로 저장됨

* **차이점**
    * 명명된 볼륨은 컨테이너가 종료될 때 도커에 의해 삭제되지 않는다. 익명 볼륨은 삭제됨
    * 컨테이너가 생성될 때마다 익명 볼륨은 다시 생성됨. 즉, 컨테이너가 제거되면 익명 볼륨은 의미 없음.
    * 익명 볼륨은 하나의 컨테이너와 연결되있음 하지만 명명된 볼륨은 하나의 컨테이너에만 연결되지는 않음
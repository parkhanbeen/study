# 상속과 코드 재사용

* 클래스를 재사용하기 위해 새로운 클래스를 추가하는 대표적인 기법은 **상속**이다.
  * 재사용 관점에서 상속이란 클래스 안에 정의된 인스턴스 변수와 메서드를 자동으로 새로운 클래스에 추가하는 구현 기법이다.
* 새로운 클래스의 인스턴스 안에 기존 클래스의 인스턴스를 포함시키는 방법은 **합성**이다.

## 상속과 중복 코드

### DRY 원칙

* 중복 코드의 가장 큰 문제는 코드를 수정하는 데 필요한 노력이 몇 배로 증가시킨다는 것이다.
  * 우선 어떤 코드가 중복인지를 찾아야함
  * 중복 코드를 찾으면 찾아낸 모든 코드를 일관되게 수정해야함
  * 모든 중복 코드를 개별적으로 테스트해서 동일한 결과를 내놓는지 확인해야 함

* 중복 여부를 판단하는 기준은 변경이다. 
* 요구사항이 변경됐을 때 두 코드를 함께 수정해야 한다면 이 코드는 중복이다.
  * 모양이 유사한 것은 단지 중복 징후일 뿐
  * 중복 여부를 결정하는 기준은 코드가 변경에 반응하는 방식이다.

* 신로할 수 있고 수정하기 쉬운 소프트웨어를 만드는 효과적인 방법 중 하나는 중복을 제거하는 것이다.
* **DRY(Don't Repeat Yourself) 원칙** 을 따라야 한다.
  * `반복하지 마라`라는 뜻
  * **한 번, 단 한번(Once and Only Once) 원칙** 또는 **단일 지점 제어(Single-Point Control) 원칙** 이라고도 함


### 중복과 변경

* 중복 코드를 제거하지 않은 상태에서 코드를 수정할 수 있는 유일한 방법은 새로운 중복 코드를 추가하는 것뿐이다.
* 중복 코드의 양이 많아질수록 버그의 수는 증가하며 그에 비례해 코드를 변경하는 속도는 점점 더 느려진다.

* 민첩하게 변경하기 위해서는 중복 코드를 추가하는 대신 제거해야한다.
* 기회가 생길 때마다 코드를 **DRY**하게 만들기 위해 노력하라.


### 상속

* 결합도를 하나의 모듈이 다른 모듈에 대해 얼마나 많은 지식을 갖고 있는지를 나타내는 정도로 정의했다.
* 상속을 이용해 코드를 재사용하기 위해서는 부모 클래스의 개발자가 세웠던 가정이나 추론 과정을 정확하게 이해해야 한다.
* 이것은 자식 클래스의 작성자가 부모 클래스의 구현 방법에 대한 정확한 지식을 가져야 한다는 것을 의미한다.
* 따라서 상속은 결합도를 높인다. 상속이 초래하는 부모 클래스와 자식 클래스 사이의 강한 결합이 코드를 수정하기 어렵게 만든다.

**상속을 위한 경고1**

> 자식 클래스의 메서드 안에서 `super` 참조를 이용해 부모 클래스의 메서드를 직접 호출할 경우 두 클래스는 강하게 결합된다.
> `super` 호출을 제거할 수 있는 방법을 찾아 결합도를 제거하라.


* 상속 관계로 연결된 자식 클래스가 부모 클래스의 변경에 취약해지는 현상을 가리켜 `취약한 기반 클래스 문제`라고 부른다.

## 취약한 기반 클래스 문제